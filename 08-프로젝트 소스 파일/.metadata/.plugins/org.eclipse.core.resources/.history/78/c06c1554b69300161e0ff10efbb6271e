<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="QnaMapper">
	<resultMap type="com.bada_admin.model.Qna" id="qna">
		<result property="id" column="id" />
		<result property="subject" column="subject" />
		<result property="req_type" column="req_type" />
		<result property="content" column="content" />
		<result property="answer" column="answer" />
		<result property="answer_status" column="answer_status" />
		<result property="reg_date" column="reg_date" />
		<result property="edit_date" column="edit_date" />
		<result property="request_id" column="request_id" />
		<result property="answer_id" column="answer_id" />
	</resultMap>
	
	<!-- SELECT -->
	<!-- 문의 리스트 검색 -->
	<select id="selectQnaList" parameterType="com.bada_admin.model.Qna" resultMap="qna">
		SELECT
			id, subject, req_type, content, answer, answer_status, DATE_FORMAT(reg_date, '%Y-%m-%d') AS reg_date, 
			DATE_FORMAT(edit_date, '%Y-%m-%d') AS edit_date, request_id, answer_id
		FROM
			qna
		ORDER BY
			id DESC
	</select>
	
	<!-- INSERT -->
	<!-- 문의 입력 -->
	<insert id="insertQna" parameterType="com.bada_admin.model.Qna" useGeneratedKeys="true" keyProperty="id">
		INSERT INTO
			qna(
				subject, req_type, content, answer_status, reg_date, edit_date, request_id	
			)
		VALUES(
			#{subject}, #{req_type}, #{content}, #{answer_status}, now(), now(), #{request_id}
		)
	</insert>
	
</mapper>